<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#121212">
    <title>ComfortCan México | Train & Care</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" type="image/png" href="assets/logo.png">
</head>
<body>
    <!-- Toast Container -->
    <div id="toast-container" class="toast-container"></div>

    <!-- Loading - Dark overlay -->
    <div id="loading" class="loading-overlay hidden">
        <div class="spinner"></div>
        <span style="color: var(--color-text-primary);">Cargando...</span>
    </div>

    <!-- LOGIN -->
    <div id="login-screen" class="login-container">
        <div class="login-card">
            <img src="assets/logo.png" alt="ComfortCan" class="login-logo">
            <h1 class="login-title">Iniciar Sesión</h1>
            <form id="login-form">
                <div class="form-group">
                    <label class="form-label">Correo electrónico</label>
                    <input type="email" id="login-email" class="form-input" placeholder="admin@comfortcan.mx" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Contraseña</label>
                    <input type="password" id="login-password" class="form-input" placeholder="••••••••" required>
                </div>
                <button type="submit" class="btn btn-primary btn-block btn-lg mt-2">Ingresar</button>
            </form>
            <p id="login-error" class="text-center text-danger mt-2 hidden"></p>
        </div>
    </div>

    <!-- APP -->
    <div id="app-screen" class="app-layout hidden">
        
        <!-- Sidebar Toggle Mobile -->
        <button id="sidebar-toggle" class="sidebar-toggle">=</button>
        
        <!-- Sidebar -->
        <aside id="sidebar" class="sidebar">
            <div class="sidebar-header">
                <img src="assets/logo.png" alt="ComfortCan" class="sidebar-logo">
                <div class="sidebar-title">ComfortCan</div>
                <div class="sidebar-subtitle">Train & Care</div>
            </div>
            
            <nav class="sidebar-nav">
                <a class="nav-item active" data-section="recepcion">
                    Recepcion (Altas)
                </a>
                <a class="nav-item" data-section="paseos">
                    Paseos y Agenda
                </a>
                <a class="nav-item" data-section="caja">
                    Caja y Ticket
                </a>
                <a class="nav-item" data-section="expedientes">
                    Expedientes
                </a>
                <a class="nav-item" data-section="gestion">
                    Editar Datos
                </a>
                <a class="nav-item" data-section="calendario">
                    Calendario Ocupacion
                </a>
                <a class="nav-item" data-section="configuracion">
                    Servicios y Precios
                </a>
            </nav>
            
            <div class="sidebar-footer">
                <button id="logout-btn" class="btn btn-secondary btn-block">Cerrar Sesión</button>
            </div>
        </aside>
        
        <!-- Main Content -->
        <main class="main-content">
            
            <!-- ========== SECCIÓN: RECEPCIÓN ========== -->
            <section id="section-recepcion" class="section active">
                <div class="page-header">
                    <h1 class="page-title">Recepción y Check-In</h1>
                </div>
                
                <div class="tabs">
                    <div class="tab active" data-tab="nuevo-dueno">Nuevo Dueño</div>
                    <div class="tab" data-tab="nuevo-perro">Nuevo Perro</div>
                    <div class="tab" data-tab="check-in">Check-In</div>
                </div>
                
                <!-- Tab: Nuevo Dueño -->
                <div id="tab-nuevo-dueno" class="tab-content active">
                    <div class="card">
                        <div class="alert alert-info">Registra aquí al propietario antes de registrar al perro.</div>
                        <form id="form-propietario">
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">Nombre Cliente *</label>
                                    <input type="text" id="prop-nombre" class="form-input" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Teléfono</label>
                                    <input type="tel" id="prop-telefono" class="form-input">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Dirección</label>
                                <input type="text" id="prop-direccion" class="form-input">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Email</label>
                                <input type="email" id="prop-email" class="form-input">
                            </div>
                            <button type="submit" class="btn btn-primary">Guardar Cliente</button>
                        </form>
                    </div>
                </div>
                
                <!-- Tab: Nuevo Perro -->
                <div id="tab-nuevo-perro" class="tab-content">
                    <div class="card">
                        <form id="form-perro">
                            <div class="form-group">
                                <label class="form-label">¿A quién pertenece? *</label>
                                <select id="perro-propietario" class="form-select" required>
                                    <option value="">-- Seleccionar dueño --</option>
                                </select>
                            </div>
                            
                            <h3 class="mb-2 mt-3">Datos del Huésped</h3>
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">Nombre Perro *</label>
                                    <input type="text" id="perro-nombre" class="form-input" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Raza</label>
                                    <input type="text" id="perro-raza" class="form-input">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">Edad</label>
                                    <select id="perro-edad" class="form-select">
                                        <option value="">Seleccionar</option>
                                        <option value="Cachorro (< 1 año)">Cachorro (< 1 año)</option>
                                        <option value="1 año">1 año</option>
                                        <option value="2 años">2 años</option>
                                        <option value="3 años">3 años</option>
                                        <option value="4 años">4 años</option>
                                        <option value="5 años">5 años</option>
                                        <option value="6 años">6 años</option>
                                        <option value="7 años">7 años</option>
                                        <option value="8 años">8 años</option>
                                        <option value="9 años">9 años</option>
                                        <option value="10 años">10 años</option>
                                        <option value="11 años">11 años</option>
                                        <option value="12 años">12 años</option>
                                        <option value="13 años">13 años</option>
                                        <option value="14 años">14 años</option>
                                        <option value="15 años">15 años</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Género</label>
                                    <div class="flex gap-2 mt-1">
                                        <label class="form-checkbox"><input type="radio" name="perro-genero" value="Macho"> Macho</label>
                                        <label class="form-checkbox"><input type="radio" name="perro-genero" value="Hembra"> Hembra</label>
                                    </div>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">Peso (Kg)</label>
                                    <input type="number" step="0.1" id="perro-peso" class="form-input">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Fecha de Pesaje</label>
                                    <input type="date" id="perro-fecha-pesaje" class="form-input">
                                </div>
                            </div>
                            
                            <h3 class="mb-2 mt-3">Información Médica</h3>
                            <div class="form-group">
                                <label class="form-label">Medicamentos Actuales</label>
                                <input type="text" id="perro-medicamentos" class="form-input">
                            </div>
                            <div class="form-group">
                                <label class="form-checkbox">
                                    <input type="checkbox" id="perro-esterilizado">
                                    Esterilizado
                                </label>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Alergias / Condiciones</label>
                                <input type="text" id="perro-alergias" class="form-input">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Veterinario / Clínica</label>
                                <input type="text" id="perro-veterinario" class="form-input">
                            </div>
                            
                            <h3 class="mb-2 mt-3">Desparasitación</h3>
                            <div class="form-group">
                                <label class="form-label">Tipo</label>
                                <select id="perro-desparasitacion-tipo" class="form-select">
                                    <option value="">Ninguna</option>
                                    <option value="Interna">Interna</option>
                                    <option value="Externa">Externa</option>
                                    <option value="Dual">Dual (Interna + Externa)</option>
                                </select>
                            </div>
                            
                            <!-- Campos Interna -->
                            <div id="desparasitacion-interna" class="hidden">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label">Producto (Interna)</label>
                                        <input type="text" id="perro-despara-producto-int" class="form-input" placeholder="Ej. Drontal">
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Fecha Aplicación</label>
                                        <input type="date" id="perro-despara-fecha-int" class="form-input">
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Campos Externa -->
                            <div id="desparasitacion-externa" class="hidden">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label">Producto (Externa)</label>
                                        <input type="text" id="perro-despara-producto-ext" class="form-input" placeholder="Ej. Frontline, Nexgard">
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Fecha Aplicación</label>
                                        <input type="date" id="perro-despara-fecha-ext" class="form-input">
                                    </div>
                                </div>
                            </div>
                            
                            <h3 class="mb-2 mt-3">Vacunas</h3>
                            <div class="vacunas-grid">
                                <div class="vacuna-card">
                                    <div class="vacuna-title">Rabia</div>
                                    <select id="vacuna-rabia-estado" class="form-select mb-1">
                                        <option value="Pendiente">Pendiente</option>
                                        <option value="Vigente">Vigente</option>
                                        <option value="Vencida">Vencida</option>
                                    </select>
                                    <input type="date" id="vacuna-rabia-vence" class="form-input" placeholder="Vence">
                                </div>
                                <div class="vacuna-card">
                                    <div class="vacuna-title">Séxtuple</div>
                                    <select id="vacuna-sextuple-estado" class="form-select mb-1">
                                        <option value="Pendiente">Pendiente</option>
                                        <option value="Vigente">Vigente</option>
                                        <option value="Vencida">Vencida</option>
                                    </select>
                                    <input type="date" id="vacuna-sextuple-vence" class="form-input">
                                </div>
                                <div class="vacuna-card">
                                    <div class="vacuna-title">Bordetella</div>
                                    <select id="vacuna-bordetella-estado" class="form-select mb-1">
                                        <option value="Pendiente">Pendiente</option>
                                        <option value="Vigente">Vigente</option>
                                        <option value="Vencida">Vencida</option>
                                    </select>
                                    <input type="date" id="vacuna-bordetella-vence" class="form-input">
                                </div>
                                <div class="vacuna-card">
                                    <div class="vacuna-title">Giardia</div>
                                    <select id="vacuna-giardia-estado" class="form-select mb-1">
                                        <option value="Pendiente">Pendiente</option>
                                        <option value="Vigente">Vigente</option>
                                        <option value="Vencida">Vencida</option>
                                    </select>
                                    <input type="date" id="vacuna-giardia-vence" class="form-input">
                                </div>
                                <div class="vacuna-card">
                                    <div class="vacuna-title">Extra</div>
                                    <input type="text" id="vacuna-extra-nombre" class="form-input mb-1" placeholder="Nombre">
                                    <select id="vacuna-extra-estado" class="form-select mb-1">
                                        <option value="">--</option>
                                        <option value="Vigente">Vigente</option>
                                        <option value="Vencida">Vencida</option>
                                    </select>
                                    <input type="date" id="vacuna-extra-vence" class="form-input">
                                </div>
                            </div>
                            
                            <h3 class="mb-2 mt-3">Documentacion</h3>
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">Foto del Perro</label>
                                    <div class="file-upload" onclick="document.getElementById('foto-perro-input').click()">
                                        <input type="file" id="foto-perro-input" accept="image/*">
                                        <div class="file-upload-icon">+</div>
                                        <div class="file-upload-text">Click para subir foto</div>
                                    </div>
                                    <img id="foto-perro-preview" class="file-preview mt-1 hidden">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Foto Cartilla Vacunacion</label>
                                    <div class="file-upload" onclick="document.getElementById('foto-cartilla-input').click()">
                                        <input type="file" id="foto-cartilla-input" accept="image/*">
                                        <div class="file-upload-icon">+</div>
                                        <div class="file-upload-text">Click para subir cartilla</div>
                                    </div>
                                    <img id="foto-cartilla-preview" class="file-preview mt-1 hidden">
                                </div>
                            </div>
                            
                            <button type="submit" class="btn btn-primary btn-lg mt-3">Guardar Expediente</button>
                        </form>
                    </div>
                </div>
                
                <!-- Tab: Check-In -->
                <div id="tab-check-in" class="tab-content">
                    <div class="card">
                        <h3 class="mb-2">Registro de Estancia</h3>
                        
                        <div class="form-group">
                            <label class="form-label">Huésped *</label>
                            <select id="checkin-perro" class="form-select" required>
                                <option value="">-- Seleccionar perro --</option>
                            </select>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">Fecha Entrada *</label>
                                <input type="date" id="checkin-entrada" class="form-input">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Fecha Salida *</label>
                                <input type="date" id="checkin-salida" class="form-input">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Habitacion</label>
                            <select id="checkin-habitacion" class="form-select">
                                <option value="">-- Seleccionar habitacion --</option>
                            </select>
                        </div>
                        
                        <h4 class="mb-2 mt-3">Servicios</h4>
                        <div class="form-group">
                            <label class="form-label">Agregar Servicio</label>
                            <div class="flex gap-1">
                                <select id="checkin-servicio" class="form-select" style="flex:1;">
                                    <option value="">-- Seleccionar servicio --</option>
                                </select>
                                <button type="button" id="btn-agregar-servicio" class="btn btn-primary">+ Agregar</button>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Servicios Seleccionados:</label>
                            <div id="servicios-seleccionados" class="servicios-tags">
                                <p class="text-muted">No hay servicios seleccionados</p>
                            </div>
                        </div>
                        
                        <div class="card mt-2" style="background: var(--color-bg-input);">
                            <div class="flex-between">
                                <span>Días de estancia:</span>
                                <span id="checkin-dias">0 día(s)</span>
                            </div>
                            <div class="flex-between mt-1">
                                <span><strong>Total Estimado:</strong></span>
                                <span id="checkin-total" class="stat-value text-success">$0.00</span>
                            </div>
                        </div>
                        
                        <div class="form-group mt-2">
                            <label class="form-label">Color Etiqueta</label>
                            <div id="checkin-colores-container" class="colores-selector">
                                <p class="text-muted">Cargando colores...</p>
                            </div>
                            <input type="hidden" id="checkin-color" value="#45BF4D">
                        </div>
                        
                        <button type="button" id="btn-confirmar-estancia" class="btn btn-success btn-lg mt-2">Confirmar Estancia</button>
                    </div>
                </div>
            </section>
            
            <!-- ========== SECCIÓN: PASEOS ========== -->
            <section id="section-paseos" class="section">
                <div class="page-header">
                    <h1 class="page-title">Gestión de Paseos</h1>
                </div>
                
                <div class="form-row">
                    <!-- Registrar Paseo -->
                    <div class="card">
                        <h3 class="mb-2">Registrar Paseo</h3>
                        <form id="form-paseo">
                            <div class="form-group">
                                <label class="form-label">Perro *</label>
                                <select id="paseo-perro" class="form-select" required>
                                    <option value="">-- Seleccionar --</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Fecha</label>
                                <input type="date" id="paseo-fecha" class="form-input">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Tipo de Paseo *</label>
                                <select id="paseo-tipo" class="form-select" required>
                                    <option value="">-- Seleccionar --</option>
                                </select>
                            </div>
                            <div class="alert alert-info" id="paseo-precio-info">Precio del paseo: $0.00</div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">Hora Salida</label>
                                    <input type="time" id="paseo-salida" class="form-input">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Hora Regreso</label>
                                    <input type="time" id="paseo-regreso" class="form-input">
                                </div>
                            </div>
                            <button type="submit" class="btn btn-primary">Guardar Paseo</button>
                        </form>
                    </div>
                    
                    <!-- Historial -->
                    <div class="card">
                        <h3 class="mb-2">Historial de Paseos</h3>

                        <!-- Filtros mejorados -->
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">Perro</label>
                                <select id="filtro-paseo-perro" class="form-select">
                                    <option value="">Todos</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Estado</label>
                                <select id="filtro-paseo-estado" class="form-select">
                                    <option value="">Todos</option>
                                    <option value="pendiente">Pendientes</option>
                                    <option value="pagado">Pagados</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Desde</label>
                                <input type="date" id="filtro-paseo-desde" class="form-input">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Hasta</label>
                                <input type="date" id="filtro-paseo-hasta" class="form-input">
                            </div>
                        </div>

                        <!-- Leyenda de acciones -->
                        <div class="alert alert-info mt-2" style="font-size: 0.85rem; padding: 0.75rem;">
                            <strong>Acciones disponibles:</strong>
                            <span class="badge badge-info ml-1">Caja</span> = Enviar a caja para cobrar en ticket |
                            <span class="badge badge-success ml-1">Pagado</span> = Marcar como pagado directamente
                        </div>

                        <div class="table-container mt-2">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Fecha</th>
                                        <th>Perro</th>
                                        <th>Tipo</th>
                                        <th>Precio</th>
                                        <th>Estado</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="tabla-paseos">
                                    <tr><td colspan="6" class="text-center text-muted">Sin paseos</td></tr>
                                </tbody>
                            </table>
                        </div>

                        <!-- Resumen -->
                        <div class="stats-grid mt-2">
                            <div class="stat-card">
                                <div class="stat-icon" style="background: rgba(245, 166, 35, 0.15); color: var(--color-warning);">$</div>
                                <div>
                                    <div class="stat-label">Total Pendiente</div>
                                    <div class="stat-value text-warning" id="paseos-pendiente-total">$0.00</div>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon" style="background: rgba(69, 191, 77, 0.15); color: var(--color-success);">$</div>
                                <div>
                                    <div class="stat-label">Total Pagado</div>
                                    <div class="stat-value text-success" id="paseos-pagado-total">$0.00</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- ========== SECCIÓN: CAJA ========== -->
            <section id="section-caja" class="section">
                <div class="page-header">
                    <h1 class="page-title">Caja y Liquidación</h1>
                </div>
                
                <div class="form-row">
                    <div class="card">
                        <div class="form-group">
                            <label class="form-label">Seleccionar Cliente (Perro):</label>
                            <select id="caja-perro" class="form-select">
                                <option value="">-- Seleccionar perro --</option>
                            </select>
                        </div>
                        
                        <details class="mt-2">
                            <summary style="cursor: pointer; color: var(--color-primary);">+ Agregar Cargo Manual</summary>
                            <div class="card mt-2" style="background: var(--color-bg-input);">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label">Fecha del Servicio</label>
                                        <input type="date" id="cargo-fecha" class="form-input">
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Concepto</label>
                                        <input type="text" id="cargo-concepto" class="form-input" placeholder="Ej: 1kg Croquetas">
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Monto ($)</label>
                                        <input type="number" step="0.01" id="cargo-monto" class="form-input">
                                    </div>
                                </div>
                                <button type="button" id="btn-agregar-cargo" class="btn btn-secondary">Agregar Cargo</button>
                            </div>
                        </details>
                        
                        <h3 class="mt-3 mb-2">Cargos Pendientes</h3>
                        <div class="table-container">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Fecha</th>
                                        <th>Perro</th>
                                        <th>Concepto</th>
                                        <th>Monto</th>
                                        <th>Eliminar</th>
                                    </tr>
                                </thead>
                                <tbody id="tabla-cargos">
                                    <tr><td colspan="5" class="text-center text-muted">Selecciona un cliente</td></tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="flex-between mt-3">
                            <div>
                                <strong>Total a Cobrar:</strong>
                                <span id="caja-total" class="stat-value text-success">$0.00</span>
                            </div>
                            <button type="button" id="btn-generar-ticket" class="btn btn-primary">Generar Ticket</button>
                        </div>
                    </div>
                    
                    <!-- Ticket Preview -->
                    <div class="card" id="ticket-container" style="display: none;">
                        <div class="flex-between mb-2">
                            <h3>Ticket de Pago</h3>
                            <div class="btn-group">
                                <button type="button" id="btn-cerrar-ticket" class="btn btn-secondary btn-sm" onclick="cerrarTicket()">Cerrar</button>
                                <button type="button" id="btn-imprimir" class="btn btn-secondary btn-sm">Imprimir</button>
                                <button type="button" id="btn-descargar" class="btn btn-secondary btn-sm">Descargar</button>
                            </div>
                        </div>
                        <div id="ticket-content">
                            <!-- Ticket se genera dinámicamente -->
                        </div>
                        <button type="button" id="btn-confirmar-pago" class="btn btn-success btn-block mt-2">Confirmar Pago</button>
                    </div>
                </div>
            </section>
            
            <!-- ========== SECCIÓN: EXPEDIENTES ========== -->
            <section id="section-expedientes" class="section">
                <div class="page-header">
                    <h1 class="page-title">Expedientes Digitales</h1>
                </div>
                
                <div class="card">
                    <div class="form-row">
                        <div class="form-group" style="flex: 2;">
                            <label class="form-label">Buscar Perro:</label>
                            <input type="text" id="filtro-expediente" class="form-input" placeholder="Buscar por nombre, raza o dueño...">
                        </div>
                        <div class="form-group" style="flex: 1;">
                            <label class="form-label">O seleccionar:</label>
                            <select id="expediente-perro" class="form-select">
                                <option value="">-- Seleccionar perro --</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <!-- Lista de expedientes con tarjetas -->
                <div id="lista-expedientes" class="mt-2">
                    <!-- Se llena dinámicamente -->
                </div>
                
                <!-- Contenido del expediente seleccionado -->
                <div id="expediente-contenido" class="hidden">
                    <!-- Se llena dinámicamente -->
                </div>
            </section>
            
            <!-- ========== SECCION: EDITAR DATOS ========== -->
            <section id="section-gestion" class="section">
                <div class="page-header">
                    <h1 class="page-title">Editar Datos</h1>
                </div>
                
                <div class="alert alert-warning">Cuidado: Los cambios aqui son permanentes. Ten cuidado al eliminar registros.</div>
                
                <div class="card">
                    <div class="form-group">
                        <label class="form-label">¿Qué deseas gestionar?</label>
                        <div class="flex gap-2">
                            <label class="form-checkbox">
                                <input type="radio" name="gestion-tipo" value="perros" checked> Perros
                            </label>
                            <label class="form-checkbox">
                                <input type="radio" name="gestion-tipo" value="clientes"> Clientes
                            </label>
                        </div>
                    </div>
                    
                    <!-- Gestión Perros -->
                    <div id="gestion-perros">
                        <div class="form-group">
                            <label class="form-label">Seleccionar Perro:</label>
                            <select id="gestion-perro-select" class="form-select">
                                <option value="">-- Seleccionar --</option>
                            </select>
                        </div>
                        <p class="text-muted">Al seleccionar un perro se abrirá el formulario de edición completo.</p>
                    </div>
                    
                    <!-- Gestión Clientes -->
                    <div id="gestion-clientes" class="hidden">
                        <div class="form-group">
                            <label class="form-label">Seleccionar Cliente:</label>
                            <select id="gestion-cliente-select" class="form-select">
                                <option value="">-- Seleccionar --</option>
                            </select>
                        </div>
                        <div id="gestion-cliente-form" class="hidden">
                            <!-- Se llena dinámicamente -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- ========== SECCION: CALENDARIO DE OCUPACION ========== -->
            <section id="section-calendario" class="section">
                <div class="page-header">
                    <h1 class="page-title">Calendario de Ocupacion</h1>
                </div>

                <div class="card">
                    <div class="calendario-controls mb-2">
                        <button type="button" id="btn-semana-anterior" class="btn btn-secondary">&lt; Mes</button>
                        <button type="button" id="btn-calendario-hoy" class="btn btn-primary btn-sm">Hoy</button>
                        <span id="calendario-rango-fechas" class="calendario-rango">Cargando...</span>
                        <button type="button" id="btn-semana-siguiente" class="btn btn-secondary">Mes &gt;</button>
                    </div>
                    <button type="button" id="btn-nueva-reserva" class="btn-fab-reserva">+ Nueva Reserva</button>

                    <div class="calendario-ocupacion-container">
                        <div id="calendario-ocupacion" class="calendario-ocupacion">
                            <!-- Se llena dinámicamente con JavaScript -->
                            <p class="text-center text-muted">Cargando calendario...</p>
                        </div>
                    </div>

                    <div id="calendario-leyenda" class="calendario-leyenda mt-2">
                        <!-- Se llena dinámicamente con los colores del catálogo -->
                        <span class="leyenda-item"><span class="leyenda-color" style="background: #e0e0e0;"></span> Disponible</span>
                    </div>
                </div>
            </section>

            <!-- ========== SECCION: SERVICIOS Y PRECIOS ========== -->
            <section id="section-configuracion" class="section">
                <div class="page-header">
                    <h1 class="page-title">Servicios y Precios</h1>
                </div>
                
                <div class="form-row">
                    <!-- Servicios -->
                    <div class="card">
                        <h3 class="mb-1">Catálogo de Servicios</h3>
                        <p class="text-muted mb-2">Hospedaje, Baño, Guardería, etc.</p>
                        
                        <details>
                            <summary style="cursor: pointer; color: var(--color-primary);">+ Nuevo Servicio</summary>
                            <div class="card mt-2" style="background: var(--color-bg-input);">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label">Nombre</label>
                                        <input type="text" id="nuevo-servicio-nombre" class="form-input" placeholder="Ej: Hospedaje">
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Precio ($)</label>
                                        <input type="number" step="0.01" id="nuevo-servicio-precio" class="form-input">
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Tipo de Cobro</label>
                                        <select id="nuevo-servicio-tipo" class="form-select">
                                            <option value="unico">Único</option>
                                            <option value="por_dia">Por día</option>
                                        </select>
                                    </div>
                                </div>
                                <button type="button" id="btn-guardar-servicio" class="btn btn-primary">Guardar Servicio</button>
                            </div>
                        </details>
                        
                        <div class="table-container mt-2">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Servicio</th>
                                        <th>Precio</th>
                                        <th>Tipo</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="tabla-servicios">
                                    <tr><td colspan="4" class="text-center text-muted">Cargando...</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <!-- Tipos de Paseo -->
                    <div class="card">
                        <h3 class="mb-1">Catalogo de Paseos</h3>
                        <p class="text-muted mb-2">Tipos de paseo disponibles.</p>

                        <details>
                            <summary style="cursor: pointer; color: var(--color-primary);">+ Nuevo Tipo de Paseo</summary>
                            <div class="card mt-2" style="background: var(--color-bg-input);">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label">Nombre</label>
                                        <input type="text" id="nuevo-paseo-nombre" class="form-input" placeholder="Ej: Paseo Corto">
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Duracion (min)</label>
                                        <input type="number" id="nuevo-paseo-duracion" class="form-input">
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Precio ($)</label>
                                        <input type="number" step="0.01" id="nuevo-paseo-precio" class="form-input">
                                    </div>
                                </div>
                                <button type="button" id="btn-guardar-tipo-paseo" class="btn btn-primary">Guardar Paseo</button>
                            </div>
                        </details>

                        <div class="table-container mt-2">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Tipo</th>
                                        <th>Precio</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="tabla-tipos-paseo">
                                    <tr><td colspan="3" class="text-center text-muted">Cargando...</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Colores de Etiqueta -->
                <div class="card mt-2">
                    <h3 class="mb-1">Colores de Etiqueta</h3>
                    <p class="text-muted mb-2">Colores para identificar estados de pago en el calendario.</p>

                    <details>
                        <summary style="cursor: pointer; color: var(--color-primary);">+ Nuevo Color</summary>
                        <div class="card mt-2" style="background: var(--color-bg-input);">
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">Color</label>
                                    <input type="color" id="nuevo-color-valor" class="form-input" value="#45BF4D" style="width: 60px; height: 40px; padding: 0;">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Texto (significado)</label>
                                    <input type="text" id="nuevo-color-texto" class="form-input" placeholder="Ej: Pagado, Pendiente">
                                </div>
                            </div>
                            <button type="button" id="btn-guardar-color" class="btn btn-primary">Guardar Color</button>
                        </div>
                    </details>

                    <div class="table-container mt-2">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Color</th>
                                    <th>Texto</th>
                                    <th>Acciones</th>
                                </tr>
                            </thead>
                            <tbody id="tabla-colores">
                                <tr><td colspan="3" class="text-center text-muted">Cargando...</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Habitaciones -->
                <div class="card mt-2">
                    <h3 class="mb-1">Catalogo de Habitaciones</h3>
                    <p class="text-muted mb-2">Habitaciones disponibles para hospedaje.</p>

                    <details>
                        <summary style="cursor: pointer; color: var(--color-primary);">+ Nueva Habitacion</summary>
                        <div class="card mt-2" style="background: var(--color-bg-input);">
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">Nombre</label>
                                    <input type="text" id="nueva-habitacion-nombre" class="form-input" placeholder="Ej: Suite 1">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Capacidad (perros)</label>
                                    <input type="number" id="nueva-habitacion-capacidad" class="form-input" value="1" min="1">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Descripcion</label>
                                    <input type="text" id="nueva-habitacion-descripcion" class="form-input" placeholder="Opcional">
                                </div>
                            </div>
                            <button type="button" id="btn-guardar-habitacion" class="btn btn-primary">Guardar Habitacion</button>
                        </div>
                    </details>

                    <div class="table-container mt-2">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Habitacion</th>
                                    <th>Capacidad</th>
                                    <th>Descripcion</th>
                                    <th>Acciones</th>
                                </tr>
                            </thead>
                            <tbody id="tabla-habitaciones">
                                <tr><td colspan="4" class="text-center text-muted">Cargando...</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>
            
        </main>
    </div>

    <script src="app.js"></script>
</body>
</html>
